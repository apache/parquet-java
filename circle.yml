general:
  artifacts:
    - target/

machine:
  pre:
    - ./scripts/install_deps.sh
  java:
    version: oraclejdk8
  environment:
    TERM: dumb

test:
  pre:
    - ./build/mvn install --batch-mode -DskipTests=true -Dmaven.javadoc.skip=true -Dsource.skip=true
  override:
    - ./build/mvn test -Pthrift9

deployment:
  release:
    tag: /[0-9]+(\.[0-9]+)+/
    commands:
      - ./gradlew -i bintrayUpload

